module.exports=function(e){var t={};function n(o){if(t[o])return t[o].exports;var r=t[o]={i:o,l:!1,exports:{}};return e[o].call(r.exports,r,r.exports,n),r.l=!0,r.exports}return n.m=e,n.c=t,n.d=function(e,t,o){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(o,r,function(t){return e[t]}.bind(null,r));return o},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=20)}([function(e,t,n){"use strict";var o=n(2),r=n.n(o),c="fof-nightmode.default_theme",a={AUTO:0,LIGHT:1,DARK:2,DEFAULT:function(){var e;return Number.parseInt((null==(e=r.a.data.settings)?void 0:e[c])||r.a.data[c])||0}};t.a=a},function(e,t,n){"use strict";n.d(t,"a",(function(){return a})),n.d(t,"c",(function(){return i})),n.d(t,"b",(function(){return s}));var o=n(8),r=n(0),c="flarum_nightmode",a=function(){var e=o.get(c);return e||"0"===e?Number(e):r.a.DEFAULT()},i=function(e){return o.set(c,e,{sameSite:"lax",secure:"https:"===location.protocol})},s=function(){return o.remove(c)}},function(e,t){e.exports=flarum.core.compat["common/app"]},function(e,t,n){"use strict";n.d(t,"b",(function(){return m}));var o=n(2),r=n.n(o),c=n(6),a=n(10),i=n.n(a),s=n(0),u=n(7),f=n(4);function m(){var e,t=r.a.session.user,n=null==(e=r.a.session.user)?void 0:e.preferences().fofNightMode_perDevice;t&&!n||Object(u.a)(),n&&Object(u.a)(),function(e){if(e===s.a.DARK)d("night");else if(e===s.a.LIGHT)d("day");else{d(window.matchMedia("(prefers-color-scheme: dark)").matches?"night":"day")}}(Object(f.a)())}function p(){return{day:r.a.data["fof-nightmode.assets.day"],night:r.a.data["fof-nightmode.assets.night"]}}function d(e){var t=document.querySelector("link.nightmode-light[rel=stylesheet]"),n=document.querySelector("link.nightmode-dark[rel=stylesheet]");if(t&&n){if(Object(f.a)()===s.a.AUTO)return;var o=document.createElement("link");"onload"in o?o.onload=function(){t.remove(),n.remove()}:(t.remove(),n.remove()),o.rel="stylesheet",o.className="nightmode",o.href=p()[e],document.head.append(o)}else{var r=t||n||document.querySelector("link.nightmode[rel=stylesheet]"),c=p()[e];c!==r.href&&(r.href=c,r.className="nightmode")}}t.a=function(){Object(c.extend)(i.a.prototype,"oninit",m)}},function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var o=n(0),r=n(1);function c(){var e,t=app.session.user,n=!t||!!t.preferences().fofNightMode_perDevice,c=t&&t.preferences().fofNightMode;return n?e=Object(r.a)():"number"==typeof c&&-1!==c&&(e=c),"number"==typeof e?e:o.a.DEFAULT()}},function(e,t){e.exports=flarum.core.compat["forum/app"]},function(e,t){e.exports=flarum.core.compat["common/extend"]},function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var o=n(0),r=n(1);function c(){var e=Array.from(new Set(Object.values(o.a))),t=Object(r.a)();isNaN(t)?a("Theme is not a valid integer! Resetting..."):e.includes(t)||a("Theme is out of bounds! Resetting...")}function a(e){console.warn(e),Object(r.c)(o.a.DEFAULT())}},function(e,t,n){"use strict";var o=this&&this.__assign||function(){return(o=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)};function r(e,t){if(!t)return"";var n="; "+e;return!0===t?n:n+"="+t}function c(e,t,n){return encodeURIComponent(e).replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent).replace(/\(/g,"%28").replace(/\)/g,"%29")+"="+encodeURIComponent(t).replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent)+function(e){if("number"==typeof e.expires){var t=new Date;t.setMilliseconds(t.getMilliseconds()+864e5*e.expires),e.expires=t}return r("Expires",e.expires?e.expires.toUTCString():"")+r("Domain",e.domain)+r("Path",e.path)+r("Secure",e.secure)+r("SameSite",e.sameSite)}(n)}function a(e){for(var t={},n=e?e.split("; "):[],o=/(%[\dA-F]{2})+/gi,r=0;r<n.length;r++){var c=n[r].split("="),a=c.slice(1).join("=");'"'===a.charAt(0)&&(a=a.slice(1,-1));try{t[c[0].replace(o,decodeURIComponent)]=a.replace(o,decodeURIComponent)}catch(e){}}return t}function i(){return a(document.cookie)}function s(e,t,n){document.cookie=c(e,t,o({path:"/"},n))}t.__esModule=!0,t.encode=c,t.parse=a,t.getAll=i,t.get=function(e){return i()[e]},t.set=s,t.remove=function(e,t){s(e,"",o(o({},t),{expires:-1}))}},,function(e,t){e.exports=flarum.core.compat["common/components/Page"]},function(e,t){e.exports=flarum.core.compat["common/components/Button"]},function(e,t){e.exports=flarum.core.compat["forum/components/SettingsPage"]},function(e,t){e.exports=flarum.core.compat["forum/components/SessionDropdown"]},function(e,t){e.exports=flarum.core.compat["forum/components/HeaderSecondary"]},function(e,t){e.exports=flarum.core.compat["common/components/LoadingIndicator"]},function(e,t){e.exports=flarum.core.compat["common/components/Select"]},function(e,t){e.exports=flarum.core.compat["common/components/FieldSet"]},function(e,t){e.exports=flarum.core.compat["common/components/Switch"]},function(e,t){e.exports=flarum.core.compat["common/helpers/icon"]},function(e,t,n){"use strict";n.r(t);var o=n(5),r=n.n(o),c=n(6),a=n(12),i=n.n(a),s=n(13),u=n.n(s),f=n(14),p=n.n(f),d=n(11),l=n.n(d),h=n(15),g=n.n(h),b=n(16),v=n.n(b),O=n(17),y=n.n(O),j=n(18),x=n.n(j),_=(n(19),n(3)),S=n(7),T=n(1),N=n(4),A=n(0),U=function(e){return r.a.translator.trans("fof-nightmode.forum.user.settings."+e)},D=function(e){return e===A.a.LIGHT||e===A.a.AUTO&&!window.matchMedia("(prefers-color-scheme: dark)").matches},M=function(){Object(c.extend)(i.a.prototype,"settingsItems",(function(e){var t=r.a.session.user,n=!!t.preferences().fofNightMode_perDevice;n&&Object(S.a)();var o=!window.matchMedia("not all and (prefers-color-scheme), (prefers-color-scheme)").matches,c=Object(N.a)(),a={0:U("options.auto"),1:U("options.day"),2:U("options.night")};o&&(delete a[0],c===A.a.AUTO&&(c=r.a.forum.attribute("fofNightMode_autoUnsupportedFallback"))),e.add("fof-nightmode",y.a.component({label:U("heading"),className:"Settings-theme"},[m("p",{className:"description"},U("description")),m("p",{className:"description"},U("description2")),o?m("p",{class:"description NightMode-autoUnsupported"},U("auto_unsupported")):null,x.a.component({className:"Settings-theme--per_device_cb",state:n,onchange:function(e){e?T.c(c):T.b(),t.savePreferences({fofNightMode_perDevice:e}).then((function(){Object(_.b)()}))}},U("device_specific_setting_checkbox")),v.a.component({value:c,className:"Settings-theme--input",onchange:function(e){if(n)return T.c(e),void Object(_.b)();t.savePreferences({fofNightMode:e}).then((function(){m.redraw(),Object(_.b)()}))},options:a}),m("p",{className:"Settings-theme--selection_description"},c===A.a.AUTO?U("option_descriptions.auto"):c===A.a.LIGHT?U("option_descriptions.day"):c===A.a.DARK?U("option_descriptions.night"):g.a.component())]))})),Object(c.extend)(p.a.prototype,"items",(function(e){if(!r.a.session.user){var t=Object(N.a)(),n=D(t);e.add("nightmode",m(l.a,{className:"Button Button--flat",onclick:function(){var e,n=(e=t)===A.a.AUTO?A.a.LIGHT:e===A.a.LIGHT?A.a.DARK:A.a.AUTO;T.c(n),Object(_.b)()},icon:t===A.a.AUTO?"fas fa-adjust":"far fa-"+(n?"sun":"moon")},r.a.translator.trans("fof-nightmode.forum.header.nightmode_button")),15)}})),Object(c.extend)(u.a.prototype,"items",(function(e){if(r.a.session.user){var t=r.a.session.user,n=D(Object(N.a)());e.add(n?"nightmode":"daymode",l.a.component({icon:"far fa-"+(n?"moon":"sun"),onclick:function(){var e=n?A.a.DARK:A.a.LIGHT;if(t.preferences().fofNightMode_perDevice)return T.c(e),void Object(_.b)();t.savePreferences({fofNightMode:e}).then((function(){Object(_.b)()}))}},r.a.translator.trans("fof-nightmode.forum."+(n?"night":"day"))),-1)}}))};r.a.initializers.add("fof-nightmode",(function(){M(),Object(_.a)()}))}]);
//# sourceMappingURL=forum.js.map