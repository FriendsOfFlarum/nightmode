module.exports=function(e){var t={};function n(o){if(t[o])return t[o].exports;var r=t[o]={i:o,l:!1,exports:{}};return e[o].call(r.exports,r,r.exports,n),r.l=!0,r.exports}return n.m=e,n.c=t,n.d=function(e,t,o){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(o,r,function(t){return e[t]}.bind(null,r));return o},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=18)}([function(e,t,n){"use strict";var o=n(8),r=n.n(o),c="fof-nightmode.default_theme",i={AUTO:0,LIGHT:1,DARK:2,DEFAULT:function(){var e;return Number.parseInt((null==(e=r.a.data.settings)?void 0:e[c])||r.a.data[c])||0}};t.a=i},function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"c",(function(){return a})),n.d(t,"b",(function(){return s}));var o=n(4),r=n(0),c="flarum_nightmode",i=function(){var e=o.get(c);return e||"0"===e?Number(e):r.a.DEFAULT()},a=function(e){return o.set(c,e,{sameSite:"lax",secure:"https:"===location.protocol})},s=function(){return o.remove(c)}},function(e,t,n){"use strict";n.d(t,"b",(function(){return u}));var o=n(6),r=n(10),c=n.n(r),i=n(0),a=n(7),s=n(3);function u(){var e=app.session.user;e?(e.preferences().fofNightMode_perDevice&&Object(a.a)(),p(Object(s.a)())):p(i.a.DEFAULT())}function f(){return{day:app.data["fof-nightmode.assets.day"],night:app.data["fof-nightmode.assets.night"]}}function p(e){if(e===i.a.DARK)m("night");else if(e===i.a.LIGHT)m("day");else{m(window.matchMedia("(prefers-color-scheme: dark)").matches?"night":"day")}}function m(e){var t=document.querySelector("link.nightmode-light[rel=stylesheet]"),n=document.querySelector("link.nightmode-dark[rel=stylesheet]");if(t&&n){if(Object(s.a)()===i.a.AUTO)return;var o=document.createElement("link");"onload"in o?o.onload=function(){t.remove(),n.remove()}:(t.remove(),n.remove()),o.rel="stylesheet",o.className="nightmode",o.href=f()[e],document.head.append(o)}else{var r=t||n||document.querySelector("link.nightmode[rel=stylesheet]"),c=f()[e];c!==r.href&&(r.href=c,r.className="nightmode")}}t.a=function(){Object(o.extend)(c.a.prototype,"oninit",u)}},function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var o=n(0),r=n(1);function c(){var e,t=app.session.user,n=t&&!!t.preferences().fofNightMode_perDevice,c=t&&t.preferences().fofNightMode;return n?e=Object(r.a)():"number"==typeof c&&-1!==c&&(e=c),"number"==typeof e?e:o.a.DEFAULT()}},function(e,t,n){"use strict";var o=this&&this.__assign||function(){return(o=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)};function r(e,t){if(!t)return"";var n="; "+e;return!0===t?n:n+"="+t}function c(e,t,n){return encodeURIComponent(e).replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent).replace(/\(/g,"%28").replace(/\)/g,"%29")+"="+encodeURIComponent(t).replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent)+function(e){if("number"==typeof e.expires){var t=new Date;t.setMilliseconds(t.getMilliseconds()+864e5*e.expires),e.expires=t}return r("Expires",e.expires?e.expires.toUTCString():"")+r("Domain",e.domain)+r("Path",e.path)+r("Secure",e.secure)+r("SameSite",e.sameSite)}(n)}function i(e){for(var t={},n=e?e.split("; "):[],o=/(%[\dA-F]{2})+/gi,r=0;r<n.length;r++){var c=n[r].split("="),i=c.slice(1).join("=");'"'===i.charAt(0)&&(i=i.slice(1,-1));try{t[c[0].replace(o,decodeURIComponent)]=i.replace(o,decodeURIComponent)}catch(e){}}return t}function a(){return i(document.cookie)}function s(e,t,n){document.cookie=c(e,t,o({path:"/"},n))}t.__esModule=!0,t.encode=c,t.parse=i,t.getAll=a,t.get=function(e){return a()[e]},t.set=s,t.remove=function(e,t){s(e,"",o(o({},t),{expires:-1}))}},function(e,t){e.exports=flarum.core.compat["forum/app"]},function(e,t){e.exports=flarum.core.compat["common/extend"]},function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var o=n(0),r=n(1);function c(){var e=Array.from(new Set(Object.values(o.a))),t=Object(r.a)();isNaN(t)?i("Theme is not a valid integer! Resetting..."):e.includes(t)||i("Theme is out of bounds! Resetting...")}function i(e){console.warn(e),Object(r.c)(o.a.DEFAULT())}},function(e,t){e.exports=flarum.core.compat["common/app"]},,function(e,t){e.exports=flarum.core.compat["common/components/Page"]},function(e,t){e.exports=flarum.core.compat["common/components/SettingsPage"]},function(e,t){e.exports=flarum.core.compat["common/components/Button"]},function(e,t){e.exports=flarum.core.compat["common/components/SessionDropdown"]},function(e,t){e.exports=flarum.core.compat["common/components/LoadingIndicator"]},function(e,t){e.exports=flarum.core.compat["common/components/Select"]},function(e,t){e.exports=flarum.core.compat["common/components/FieldSet"]},function(e,t){e.exports=flarum.core.compat["common/components/Switch"]},function(e,t,n){"use strict";n.r(t);var o=n(5),r=n.n(o),c=n(6),i=n(11),a=n.n(i),s=n(12),u=n.n(s),f=n(13),p=n.n(f),d=n(14),l=n.n(d),h=n(15),g=n.n(h),v=n(16),b=n.n(v),y=n(17),O=n.n(y),x=n(2),j=n(7),_=n(1),S=n(3),N=n(0),D=function(e){return r.a.translator.trans("fof-nightmode.forum.user.settings."+e)};r.a.initializers.add("fof-nightmode",(function(){Object(c.extend)(a.a.prototype,"settingsItems",(function(e){var t=r.a.session.user,n=!!t.preferences().fofNightMode_perDevice;n&&Object(j.a)();var o=!window.matchMedia("not all and (prefers-color-scheme), (prefers-color-scheme)").matches,c=Object(S.a)(),i={0:D("options.auto"),1:D("options.day"),2:D("options.night")};o&&(delete i[0],c===N.a.AUTO&&(c=r.a.forum.attribute("fofNightMode_autoUnsupportedFallback"))),e.add("fof-nightmode",b.a.component({label:D("heading"),className:"Settings-theme"},[m("p",{className:"description"},D("description")),m("p",{className:"description"},D("description2")),o?m("p",{class:"description NightMode-autoUnsupported"},D("auto_unsupported")):null,O.a.component({className:"Settings-theme--per_device_cb",state:n,onchange:function(e){e?_.c(c):_.b(),t.savePreferences({fofNightMode_perDevice:e}).then((function(){Object(x.b)()}))}},D("device_specific_setting_checkbox")),g.a.component({value:c,className:"Settings-theme--input",onchange:function(e){if(n)return _.c(e),void Object(x.b)();t.savePreferences({fofNightMode:e}).then((function(){m.redraw(),Object(x.b)()}))},options:i}),m("p",{className:"Settings-theme--selection_description"},c===N.a.AUTO?D("option_descriptions.auto"):c===N.a.LIGHT?D("option_descriptions.day"):c===N.a.DARK?D("option_descriptions.night"):l.a.component())]))})),Object(c.extend)(p.a.prototype,"items",(function(e){if(r.a.session.user){var t=r.a.session.user,n=Object(S.a)(),o=n===N.a.LIGHT||n===N.a.AUTO&&!window.matchMedia("(prefers-color-scheme: dark)").matches;e.add(o?"nightmode":"daymode",u.a.component({icon:"far fa-"+(o?"moon":"sun"),onclick:function(){var e=o?N.a.DARK:N.a.LIGHT;if(t.preferences().fofNightMode_perDevice)return _.c(e),void Object(x.b)();t.savePreferences({fofNightMode:e}).then((function(){Object(x.b)()}))}},r.a.translator.trans("fof-nightmode.forum."+(o?"night":"day"))),-1)}})),Object(x.a)()}))}]);
//# sourceMappingURL=forum.js.map